jQuery.fn.confirm=function(a){a=jQuery.extend({msg:"Are you sure?",stopAfter:"never",wrapper:"<span></span>",eventType:"click",dialogShow:"show",dialogSpeed:"",timeout:0},a);a.stopAfter=a.stopAfter.toLowerCase();if(!a.stopAfter in["never","once","ok","cancel"])a.stopAfter="never";a.buttons=jQuery.extend({ok:"Yes",cancel:"No",wrapper:'<a href="#"></a>',separator:"/"},a.buttons);var d=a.eventType;return this.each(function(){var c=this,b=jQuery(c),g,i=jQuery(a.buttons.wrapper).append(a.buttons.ok).click(function(){0!=
    a.timeout&&clearTimeout(g);b.unbind(d,e);b.show();f.hide();void 0!=c._handlers&&jQuery.each(c._handlers,function(){b.click(this.handler)});b.click();"ok"!=a.stopAfter&&"once"!=a.stopAfter&&(b.unbind(d),b.one(d,e));return!1}),h=jQuery(a.buttons.wrapper).append(a.buttons.cancel).click(function(){0!=a.timeout&&clearTimeout(g);if("cancel"!=a.stopAfter&&"once"!=a.stopAfter)b.one(d,e);b.show();f.hide();return!1});a.buttons.cls&&(i.addClass(a.buttons.cls),h.addClass(a.buttons.cls));var f=jQuery(a.wrapper).append(a.msg).append(i).append(a.buttons.separator).append(h),
    e=function(){jQuery(this).hide();"show"!=a.dialogShow&&f.hide();f.insertBefore(this);f[a.dialogShow](a.dialogSpeed);0!=a.timeout&&(clearTimeout(g),g=setTimeout(function(){h.click();b.one(d,e)},a.timeout));return!1};(function(){var a=jQuery.data(c,"events");if(!a&&c.href)b.bind("click",function(){document.location=c.href}),a=jQuery.data(c,"events");else if(!a)return;c._handlers=[];for(var e in a[d])c._handlers.push(a[d][e])})();b.unbind(d);c._confirm=e;c._confirmEvent=d;b.one(d,e)})};